<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>èµ›åšåšé¥¼</title>
<style>
html,body{margin:0;padding:0;background:#0b0f14;color:#e9f1ff;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
.wrap{max-width:900px;margin:0 auto;padding:20px}
.card{background:#121821;border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
h1{margin:0 0 8px;font-size:22px}
.muted{color:#9fb2ce}
.row{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
button{background:#1d2633;color:#e9f1ff;border:1px solid #2a3a52;border-radius:12px;padding:10px 14px;font-size:15px}
button.primary{background:#56b6f7;color:#071521;border:none}
button:active{transform:translateY(1px)}
.log{min-height:44vh;white-space:pre-wrap;line-height:1.65}
.dice{font-size:28px;margin-top:8px}
.controls{display:flex;align-items:center;gap:10px;margin:6px 0 10px}
input[type=range]{width:160px}
.chip{display:inline-block;background:#1a2433;border:1px solid #2a3a52;border-radius:999px;padding:6px 10px;font-size:12px}
.footer{margin-top:10px;font-size:12px;color:#9fb2ce}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>ğŸ² èµ›åšåšé¥¼</h1>
    <div class="controls">
      <span class="chip">é€å­—é€Ÿåº¦</span>
      <input id="speed" type="range" min="10" max="150" value="80"/>
      <span class="muted" id="speedLabel">80ms/å­—</span>
    </div>
    <div id="log" class="log"></div>
    <div id="dice" class="dice"></div>
    <div id="actions" class="row"></div>
    <div class="footer">Made by AmoyLang &amp; 2017 Dreamer</div>
  </div>
</div>
<script>
const logEl=document.getElementById('log');
const diceEl=document.getElementById('dice');
const actionsEl=document.getElementById('actions');
const speedEl=document.getElementById('speed');
const speedLabel=document.getElementById('speedLabel');
let delayPerChar=Number(speedEl.value);
speedEl.addEventListener('input',()=>{delayPerChar=Number(speedEl.value);speedLabel.textContent=delayPerChar+"ms/å­—";});
function sleep(ms){return new Promise(r=>setTimeout(r,ms));}
async function slowPrint(text,delay){let d=delay??delayPerChar;if(logEl.textContent.length>0&&!logEl.textContent.endsWith("\n"))logEl.textContent+="\n";for(const ch of text){logEl.textContent+=ch;logEl.scrollTop=logEl.scrollHeight;await sleep(d);}logEl.textContent+="\n";}
function clearUI(){diceEl.textContent='';actionsEl.innerHTML='';}
function btn(label,primary){const b=document.createElement('button');b.textContent=label;if(primary)b.classList.add('primary');return b;}
function ask(opts){return new Promise(res=>{actionsEl.innerHTML='';opts.forEach(o=>{const b=btn(o.label,o.primary);b.onclick=()=>{actionsEl.innerHTML='';res(o.value);};actionsEl.appendChild(b);});});}
function shakeDice(){return Array.from({length:6},()=>Math.floor(Math.random()*6)+1);}
function judge(r){const m=new Map();r.forEach(v=>m.set(v,(m.get(v)||0)+1));const c=n=>m.get(n)||0;const c1=c(1),c4=c(4),c5=c(5),c6=c(6);
if([1,2,3,4,5,6].every(v=>c(v)===1))return "å¯¹å ‚ï¼";
if(c4===4&&r.filter(x=>x===1).length===2)return "çŠ¶å…ƒæ’é‡‘èŠ±ï¼WE ARE THE CHAMPIONS!!!";
if(c4===6)return "å…­æ¯çº¢ï¼";
if(c5>=5)return "äº”å­ç™»ç§‘ï¼";
if(c6===6)return "æ»¡å ‚é»‘ï¼";
if(c1===6)return "éåœ°é”¦ï¼";
if(c4===5){const other=r.find(x=>x!==4);return "çŠ¶å…ƒå¸¦"+(other+4);}
if(c4===4){const others=r.filter(x=>x!==4);return "çŠ¶å…ƒå¸¦"+(others[0]+others[1]);}
if(c4===3)return "ä¸‰çº¢ï¼";
for(const [k,v] of m.entries()){if(k!==4&&v>=4)return "å››è¿›ã€‚";}
if(c4===2)return "äºŒä¸¾ã€‚";
if(c4===1)return "åªæ˜¯ä¸€ç§€ã€‚";
return "å•¥ä¹Ÿä¸æ˜¯ã€‚";}
const diceSymbols=["âš€","âš","âš‚","âšƒ","âš„","âš…"];
async function playOneRound(){clearUI();await slowPrint("å¥½çš„ï¼Œè¿™å°±ä¸ºä½ æ‘‡éª°å­ã€‚ï¼ˆç‚¹â€œå¼€å§‹â€ï¼‰");await ask([{label:"å¼€å§‹",value:"go",primary:true}]);
while(true){const r=shakeDice();diceEl.textContent=r.map(n=>diceSymbols[n-1]).join("  ");await slowPrint("å¾ˆå¥½ï¼Œä½ æ‘‡åˆ°äº†ï¼š"+r.join("ã€"));
const need=await ask([{label:"éœ€è¦å¸®å¿™åˆ¤å®šï¼ˆæ‰£1ï¼‰",value:"1",primary:true},{label:"ä¸ç”¨äº†æˆ‘ä¼šï¼ˆå…¶ä»–ï¼‰",value:"0"}]);
if(need==="1"){await slowPrint(judge(r));}else{await slowPrint("å¥½çš„ï¼Œä½ çŸ¥é“è§„åˆ™ï¼Œæˆ–è®¸ä½ æ˜¯è€ä¹¡ï¼Ÿ");}
const again=await ask([{label:"å†æ¬¡æ‘‡éª°å­ï¼ˆæ‰£1ç»§ç»­ï¼‰",value:"1",primary:true},{label:"ç»“æŸæœ¬å±€",value:"0"}]);
if(again!=="1"){await slowPrint("æ„Ÿè°¢å‚ä¸ï¼Œä¸ç®¡ä»Šå¤©æ˜¯ä¸æ˜¯ä¸­ç§‹ï¼Œéƒ½ç¥ä½ åœ†åœ†æ»¡æ»¡ã€‚",delayPerChar+120);return;}}}
async function showRules(){clearUI();
const lines=["åšé¥¼æ˜¯å¦é—¨äººä¸­ç§‹ç©çš„æ¸¸æˆã€‚","æ³¥éœ€è¦å°†åŒæ‰‹å¹¶æ‹¢ï¼Œæ‘‡å…­é¢—éª°å­,","ç„¶åå’£å½“ä¸€å£°ï¼ŒæŠŠå®ƒä»¬ä¸¢è¿›ç¢—é‡Œã€‚","ä¸è¿‡æˆ‘ä»¬ã€Šèµ›åšåšé¥¼ã€‹ä¸“æ ï¼Œä¸»æ‰“ä¸€ä¸ªæ²¡æ‰‹å°±èƒ½ç©ã€‚","(æ˜¯å§ï¼Œå“ªæ€•æ³¥æ˜¯ä¸€åªç«¯åˆå‰©ä¸‹çš„ç¢±æ°´ç²½å­ã€‚)","pythonä¼šæ›¿æ³¥éšæœºç”Ÿæˆå…­ä¸ªç‚¹æ•°ã€‚","å…­é¢—éª°å­çš„ç‚¹æ•°ä¼šç»„æˆå„ç§æ’åˆ—ç»„åˆã€‚","æ‘‡åˆ°ç‰¹å®šçš„ç»„åˆå³ä¼šè·å¥–ã€‚","å‡å¦‚æ³¥ä¸å¤ªæ¸…æ¥šâ€˜ç‰¹å®šçš„ç»„åˆâ€™æ˜¯ä»€ä¹ˆï¼Œ","æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºè¿™ä¸ªç¨‹åºæ˜¯ä¸ªå¦é—¨äººå†™çš„ã€‚","å¥¹ç‰¹åœ°å†™äº†ä¸ª â€˜judgeâ€™ å‡½æ•°ï¼Œå¸®æ³¥è‡ªåŠ¨åˆ¤å®šç»“æœã€‚","æ”¾å¿ƒï¼Œæˆ‘ä»¬ä¸ä¼šæ¼æ‰ä»»ä½•ä¸€ä¸ªâ€˜çŠ¶å…ƒâ€™ã€‚ç¬‘ã€‚"];
for(const l of lines){await slowPrint(l);}
const want=await ask([{label:"æƒ³çœ‹åº•å±‚é€»è¾‘ï¼ˆæ‰£1ï¼‰",value:"1",primary:true},{label:"ç•¥è¿‡ç›´æ¥æ¥ä¸€å±€",value:"0"}]);
if(want==="1"){const more=["æˆ‘æ¥è·Ÿæ³¥è¯´è¯´â€˜judgeâ€™æ˜¯æ€ä¹ˆè¿ä½œçš„ã€‚","åœ¨åšé¥¼çš„è§„åˆ™é‡Œï¼Œâ€˜4â€™è¿™ä¸ªç‚¹æ•°ç‰¹åˆ«å…³é”®ã€‚","åªè¦å…­ä¸ªéª°å­é‡Œå‡ºç°ä¸€ä¸ª 4ï¼Œå°±æ˜¯ã€ä¸€ç§€ã€‘","ä¸¤ä¸ª 4 â†’ ã€äºŒä¸¾ã€‘","ä¸‰ä¸ª 4 â†’ ã€ä¸‰çº¢ã€‘","å¦‚æœæœ‰å››ä¸ªç›¸åŒç‚¹æ•°ï¼Œå°±æ˜¯ã€å››è¿›ã€‘","ä¾‹å¦‚ï¼Œ4ä¸ª1ï¼Œ4ä¸ª2...","ä½†å¦‚æœæ˜¯ 4 ä¸ª 4ï¼Œé‚£å°±æ˜¯ã€çŠ¶å…ƒã€‘","è¦ä¸è¦ç®—ç®—æ‘‡å‡ºçŠ¶å…ƒçš„æ¦‚ç‡ï¼Ÿ","å¼€ç©ç¬‘çš„ã€‚æˆ‘è®¨åŒæ•°å­¦ã€‚","å…¶å®è¿˜æœ‰ä¸€äº›ç‰¹åˆ«çš„ç»„åˆï¼Œä¹Ÿèƒ½ç®—ä½œçŠ¶å…ƒã€‚","è€Œä¸”æˆ‘ä»¬è¿˜æœ‰ä¸€å¥—è§„åˆ™æ¥æ¯”è¾ƒä¸åŒçŠ¶å…ƒçš„å¤§å°ã€‚","éƒ½å†™åœ¨â€˜judgeâ€™é‡Œäº†ã€‚å“ˆå“ˆã€‚","æ³¥è¦æ˜¯æœ‰å…´è¶£ï¼Œå¯ä»¥å»ç¿»ç¿»çœ‹ã€‚","ç¥æ³¥æˆä¸ºä»Šå¹´æœ€å¤§çš„çŠ¶å…ƒã€‚"];for(const l of more){await slowPrint(l,delayPerChar);}}
const go=await ask([{label:"é‚£æˆ‘ä»¬ç°åœ¨å°±æ¥ä¸€å±€è¯•è¯•ï¼Ÿï¼ˆæ¥çš„è¯æ‰£1ï¼‰",value:"1",primary:true},{label:"å…ˆä¸ç©ï¼Œå›èœå•",value:"0"}]);if(go==="1")await playOneRound();}
async function mainMenu(){logEl.textContent="";await slowPrint("æ¬¢è¿æ¥åˆ°ã€Šèµ›åšåšé¥¼ã€‹");
while(true){const pick=await ask([{label:"æ¥ä¸€å±€ï¼ˆæ‰£1ï¼‰",value:"play",primary:true},{label:"æŸ¥çœ‹è§„åˆ™ï¼ˆæ‰£2ï¼‰",value:"rules"},{label:"é€€å‡º",value:"quit"}]);
if(pick==="play"){await playOneRound();const e=await ask([{label:"é€€å‡ºç¨‹åºï¼ˆæ‰£1ï¼‰",value:"1"},{label:"å›åˆ°å¼€å¤´",value:"0",primary:true}]);if(e==="1")break;}
else if(pick==="rules"){await showRules();const e=await ask([{label:"é€€å‡ºç¨‹åºï¼ˆæ‰£1ï¼‰",value:"1"},{label:"å›åˆ°å¼€å¤´",value:"0",primary:true}]);if(e==="1")break;}
else{await slowPrint("å¥½çš„ã€‚ç¥ä½ ç”Ÿæ´»æ„‰å¿«ã€‚");const e=await ask([{label:"é€€å‡ºç¨‹åºï¼ˆæ‰£1ï¼‰",value:"1",primary:true},{label:"å›åˆ°å¼€å¤´",value:"0"}]);if(e==="1")break;}}}
mainMenu();
</script>
</body>
</html>
